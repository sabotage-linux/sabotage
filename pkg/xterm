[deps]
libx11
libxaw
libxft
termcap

[main]
filesize=1112847
sha512=601efe93cc5278f937065c6f503a13b1fb58c2cbb6a9e71419c13b95ea5db9aa3367a5b40eec369c40dd65be074fa3a5f689e29829c3047f77134f32f87b62c6

[mirrors]
ftp://invisible-island.net/xterm/xterm-296.tgz

[build]
# Gleiches mit gleichem vergelten.
CFLAGS="-include termcap.h -g -D__GNU__ -D__GLIBC__=2 -D__GLIBC_MINOR__=10 -D_POSIX_SOURCE -D_GNU_SOURCE" ./configure -C \
  --prefix="$butch_prefix" --mandir=/share/man --enable-256-color ac_cv_header_lastlog_h=no cf_cv_path_lastlog=no || exit 1
cat <<EOF >>ptyx.h
#ifndef HACKY_HACKY_GETPT 
#define HACKY_HACKY_GETPT
static inline int getpt() { return open("/dev/ptmx",O_RDWR|O_NOCTTY); }
#endif
EOF
touch curses.h
make -j$MAKE_THREADS  || exit 1
make DESTDIR="$butch_install_dir" install || exit 1
dest="$butch_install_dir""$butch_prefix"
mkdir -p "$dest"/share/applications/
cp -f xterm.desktop "$dest"/share/applications/
# replace the ugly 70ies xterm icon with a nice one
sed -i 's@xterm-color_48x48@terminal@' "$dest"/share/applications/xterm.desktop
