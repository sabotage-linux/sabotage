[mirrors]
http://mupdf.com/downloads/archive/mupdf-1.9-source.tar.gz

[vars]
filesize=20470618
sha512=fa065d2ffbd03280fa7d0c5547cfd245b9efa5ec63f8a14f9d3999c81a732433550b33525939df6cb2c3bbfe80f4eae179855f96e0f37ea15520142b6a45bbd1
desc='fast and relatively unbloated PDF viewer. used on embedded devices'

[deps]
musl
zlib
curl
freetype
jbig2dec
libjpeg
libxext

[deps.host]
freetype
zlib
openssl
jbig2dec

[build]
rm -rf thirdparty/curl thirdparty/freetype thirdparty/jpeg thirdparty/zlib thirdparty/jbig2dec
for i in fontdump cmapdump bin2hex cquote ; do
	make verbose=yes CC=cc \
	FREETYPE_CFLAGS=-I/usr/include/freetype2 \
	FREETYPE_LIBS=-lfreetype \
	OPENSSL_CFLAGS="-DHAVE_OPENSSL" \
	OPENSSL_LIBS="-lssl -lcrypto" \
	build=release build/release/"$i"
done
CFLAGS="$optcflags" \
LDFLAGS="$optldflags  -Wl,-rpath-link=$butch_root_dir$butch_prefix/lib" \
  make verbose=yes -j $MAKE_THREADS DESTDIR="$butch_install_dir" \
  prefix="$butch_prefix" build=release install
